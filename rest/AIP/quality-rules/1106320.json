{
    "id": 1106320,
    "name": "Ensure COMPUTE Clause is not used",
    "href": "AIP/quality-rules/1106320",
    "critical": false,
    "severity": 10,
    "maxWeight": 1,
    "extension": {
        "name": "com.castsoftware.sql.movetocloud",
        "href": "AIP/extensions/com.castsoftware.sql.movetocloud"
    },
    "associatedValueName": "Number of violation occurrences",
    "description": "This rules checks that COMPUTE Clause is not used in SQL Server side.",
    "output": "Associated to each violation, the following information is provided:\n- The number of violation occurrences\n- Bookmarks for violation occurrences found in the source code",
    "rationale": "The COMPUTE clause was designed to display aggregated summary rows (like SUM, AVG) after the result set. However, it has been deprecated and completely removed in Azure SQL Database and newer SQL Server versions.",
    "reference": "https://learn.microsoft.com/en-us/data-migration/sql-server/database/assessment-rules#ComputeClause",
    "remediation": "To achieve similar functionality, use GROUP BY with ROLLUP or GROUPING SETS, which offer more flexibility and standard SQL compliance for producing subtotal and grand total rows.",
    "remediationSample": "-- Modern equivalent using GROUP BY with ROLLUP\n\nSELECT \n    ISNULL(Region, 'Total') AS Region,\n    SUM(SalesAmount) AS TotalSales\nFROM Sales\nGROUP BY ROLLUP(Region);\n\nExplanation:\n\nThe ROLLUP operator provides subtotal and grand total rows.\n\nThe ISNULL function replaces NULL in the final roll-up row with a friendly label like \"Total\".",
    "sample": "-- Deprecated: COMPUTE clause used for summary totals\n\nSELECT Region, SalesAmount\nFROM Sales\nORDER BY Region\nCOMPUTE SUM(SalesAmount);\n\nIssue:\nThis query will throw an error in Azure SQL Database, as the COMPUTE clause is unsupported.",
    "total": "Number of Artifacts with SQL code.",
    "alternativeName": "Ensure COMPUTE Clause is not used",
    "businessCriteria": [
        {
            "id": 60018,
            "name": "Cloud Migration",
            "href": "AIP/business-criteria/60018"
        }
    ],
    "technicalCriteria": [
        {
            "id": 61050,
            "name": "Database Migration - SQL Server Database to Azure SQL",
            "href": "AIP/technical-criteria/61050",
            "weight": 1,
            "critical": false
        }
    ],
    "technologies": [
        {
            "id": 0,
            "name": "ALL TECHNOLOGIES",
            "href": "AIP/technologies/0"
        }
    ],
    "qualityStandards": [
        
    ],
    "parameters": [
        
    ],
    "thresholds": [
        50.0,
        90.0,
        95.0,
        99.0
    ]
}
