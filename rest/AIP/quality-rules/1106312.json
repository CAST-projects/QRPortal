{
    "id": 1106312,
    "name": "Ensure FASTFIRSTROW is not used",
    "href": "AIP/quality-rules/1106312",
    "critical": false,
    "severity": 10,
    "maxWeight": 1,
    "extension": {
        "name": "com.castsoftware.sql.movetocloud",
        "href": "AIP/extensions/com.castsoftware.sql.movetocloud"
    },
    "associatedValueName": "Number of violation occurrences",
    "description": "The FASTFIRSTROW query hint, previously used to optimize query performance by prioritizing quick retrieval of the first row, is no longer supported in Azure SQL Database. Attempts to use this hint in queries will result in errors during execution or migration.",
    "output": "Associated to each violation, the following information is provided:\n- The number of violation occurrences\n- Bookmarks for violation occurrences found in the source code",
    "rationale": "The FASTFIRSTROW hint was deprecated in favor of a more flexible and standard-compliant alternative \u2014 the OPTION (FAST n) query hint. Azure SQL Database supports modern T-SQL standards and removes legacy hints that can lead to inconsistent query optimization or outdated execution strategies. Using OPTION (FAST n) provides more control over the query behavior by allowing you to specify the number of rows the optimizer should prioritize, leading to better performance tuning and compatibility with current SQL engines.",
    "reference": "https://learn.microsoft.com/en-us/data-migration/sql-server/database/assessment-rules#FastFirstRowHint",
    "remediation": "To resolve this issue:\n\nReplace any instance of the FASTFIRSTROW query hint with the supported OPTION (FAST n) syntax.\n\nAdjust the value of n based on the desired number of rows to be returned quickly \u2014 for example, use OPTION (FAST 1) to prioritize the first row.\n\nTest the query to ensure performance meets expectations under the new optimization model.",
    "remediationSample": "-- Using the supported OPTION (FAST 1) query hint instead\n\nSELECT *\nFROM Orders\nWHERE OrderDate > '2024-01-01'\nORDER BY OrderDate\nOPTION (FAST 1);\n\nThis alternative instructs the query optimizer to return the first row as quickly as possible, offering similar functionality while maintaining Azure SQL compatibility.",
    "sample": "-- Using the deprecated FASTFIRSTROW query hint\n\nSELECT *\nFROM Orders\nWHERE OrderDate > '2024-01-01'\nORDER BY OrderDate\nOPTION (FASTFIRSTROW);\n\nThis syntax will result in an error in Azure SQL Database.",
    "total": "Number of Artifacts with SQL code.",
    "alternativeName": "Ensure FASTFIRSTROW is not used",
    "businessCriteria": [
        {
            "id": 60018,
            "name": "Cloud Migration",
            "href": "AIP/business-criteria/60018"
        }
    ],
    "technicalCriteria": [
        {
            "id": 61050,
            "name": "Database Migration - SQL Server Database to Azure SQL",
            "href": "AIP/technical-criteria/61050",
            "weight": 1,
            "critical": false
        }
    ],
    "technologies": [
        {
            "id": 0,
            "name": "ALL TECHNOLOGIES",
            "href": "AIP/technologies/0"
        }
    ],
    "qualityStandards": [
        
    ],
    "parameters": [
        
    ],
    "thresholds": [
        50.0,
        90.0,
        95.0,
        99.0
    ]
}
